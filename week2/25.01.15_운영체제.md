# 운영체제
* 사용자가 컴퓨터를 쉽게 다루게 해주는 인터페이스

### 운영체제의 역할
1. **CPU 스케줄링과 프로세스 관리**
2. **메모리 관리**
3. **디스크 관리**
4. **I/O 디바시으 관리**


### 시스템콜
* 운영체제가 커널에 접근하기 위한 인터페이스이며 유저 프로그램이 운영체제의 서비스를 받기 위해 커널 함수를 호출할 때쓴다.

## 컴퓨터 요소
1. CPU
    - 제어장치(CU) : 프로세스 조작을 지시
    - 레지스터 : CPU안에 있는 매우 빠른 임시기억 장치
    - 산술논리연산장치(ALU) : 산술 연산 계산
    - 인터럽트 : 어떤 신호가 들어왔을 때 CPU 잠깐 정지시킨다.
        * 하드웨어 인터럽트 : IO 디바이스에서 발생하는 인터럽트
        * 소프트웨어 인터럽트 : 트랩(trap)이라고도 하며 사용자 프로그램이 운영체제 서비스를 받기 위해 시스템콜을 호출할 때 발생한다.
2. DMA 컨트롤러
    - IO 디바이스가 메모리에 데이터를 전송할 때 CPU를 사용하지 않고 직접 메모리에 접근하여 데이터를 전송한다.
3. 메모리
    - 주기억장치 : 프로그램과 데이터를 저장하는 장치
    - 보조기억장치 : 주기억장치보다 크고 저렴한 장치
4. 타이머
    - 몇 초안에는 작업이 끝나야 한다는 것을 정하고 특정 프로그램에 시간을 제한
5. 디바이스 컨트롤러
    - IO 디바이스를 제어하는 장치

## 메모리

### 메모리 계층
1. 레지스터 - CPU 내부에 있는 메모리,휘발성
2. 캐시 - CPU와 메모리 사이에 있는 메모리, L1, L2, L3 캐시, 휘발성
3. 주기억장치 - 메모리, 휘발성
4. 보조기억장치 - 하드디스크, SSD, 비휘발성

#### 캐시
* CPU와 메모리 사이에 있는 메모리로 CPU가 메모리에 접근할 때 빠르게 접근하기 위해 사용한다.
* 캐시는 레지스터에 비해 느리지만 메모리에 비해 빠르다.
* 병목 현상을 줄이기위한 메모리

#### 지역성의 원리
* 시간 지역성 : 최근에 참조된 주소는 곧 다시 참조될 확률이 높다.
* 공간 지역성 : 최근에 참조된 주소와 인접한 주소가 곧 참조될 확률이 높다.

### 웹 브라우저의 캐시
1. 쿠키 : 만료기한이 있는 키-값 저장소
2. 로컬 스토리지 :만료기한이 없는 키-값 저장소
3. 세션 스토리지 : 탭이나 창이 닫힐 때까지만 유지되는 키-값 저장소


### 가상 메모리
* 프로그램이 실행될 때 메모리에 올라가는 것이 아니라 필요한 부분만 메모리에 올라가는 것
* 가상 메모리는 주기억장치와 보조기억장치를 합친 것이다.

### TLB
* 가상 주소를 물리 주소로 변환하는 데 사용하는 캐시

### 스와핑
* 메모리에 올라가지 않은 프로세스가 실행될 때 메모리에 올라가지 않은 프로세스를 메모리로 올리고 당장 사용하지 않은 영역을 하드디스크로 옮긴다.

### 페이지 폴트
* 페이지가 메모리에 없을 때 발생하는 것
* 페이지 폴트가 발생하면 페이지 폴트 핸들러가 페이지를 메모리로 올린다.
* 페이지 폴트가 발생하면 페이지 교체 알고리즘이 동작한다.
* 페이지 교체 알고리즘은 FIFO, LRU, LFU, NRU, Clock, Optimal 등이 있다.


### 스레싱
* 페이지 폴트가 너무 많이 발생하여 CPU가 페이지 폴트 핸들러를 실행하는 시간이 CPU가 프로세스를 실행하는 시간보다 길어지는 현상

### 작업세트
* 프로세스가 사용하는 페이지의 집합을 만들어서 미리 메모리에 로드하는 것

#### PFF
* 페이지 폴트 빈도를 조절하는 방법으로 상한선과 하한선을 만드는 방법

### 메모리 할당
1. 연속 메모리 할당
    - 프로세스가 메모리에 연속적으로 할당되는 방법
    - 프로세스가 메모리에 연속적으로 할당되어야 하는 경우가 있다.
2. 고정 분할 방식
    - 메모리를 고정된 크기로 나누어서 프로세스에게 할당하는 방식
    - 내부 단편화가 발생한다.
3. 가변 분할 방식
    - 프로세스의 크기에 따라 메모리를 할당하는 방식
    - 외부 단편화가 발생한다.
    - 최초 적합, 최적 적합, 최악 적합 방식이 있다.
### 불연속 할당
1. 페이징
    - 프로세스를 페이지로 나누어서 메모리에 할당하는 방식
    - 페이지 테이블을 사용한다.
2. 세그멘테이션
    - 프로세스를 세그먼트로 나누어서 메모리에 할당하는 방식
    - 세그먼트 테이블을 사용한다.
3. 페이지드 세그멘테이션
    - 세그먼트를 페이지로 나누어서 메모리에 할당하는 방식

### 페이지 교체 알고리즘
1. FIFO
    - 가장 먼저 들어온 페이지를 교체하는 방식
    - Belady의 모순이 발생할 수 있다.
2. LRU
    - 가장 오랫동안 사용되지 않은 페이지를 교체하는 방식
    - 스택이나 카운터를 사용하여 구현할 수 있다.
3. LFU
    - 가장 적게 사용된 페이지를 교체하는 방식
4. NRU
    - 최근에 사용하지 않은 페이지를 교체하는 방식
5. 오프라인 알고리즘
    - Optimal 알고리즘
    - 페이지 폴트가 가장 나중에 발생하는 페이지를 교체하는 방식
    - 미래에 사용되는 프로세스를 알 수가 없어 사용할 수 없다.

## 프로세스와 스레드

### 프로세스
* 프로세스는 실행 중인 프로그램이다.

#### 전처리
* 소스 코드의 주석을 제거하고 헤다파일을 병합하여 매크로를 치환하는 작업

#### 컴파일러
* 전처리된 코드를 어셈블리 코드로 변환하는 작업

#### 어셈블러
* 어셈블리 코드를 기계어로 변환하는 작업

#### 링커
* 여러 개의 오브젝트 파일을 하나의 실행 파일로 만드는 작업

#### 로더
* 실행 파일을 메모리에 로드하는 작업

#### 정적 라이브러리
* 컴파일 시에 라이브러리를 링크하는 방식

#### 동적 라이브러리
* 실행 시에 라이브러리를 링크하는 방식

### 프로세스의 상태
1. 생성 상태
2. 대기 상태
3. 대기 중단 상태
4. 실행 상태
5. 중단 상태
6. 일시 중단 상태
7. 종료 상태

#### 프로세스 메모리 구조
1. 코드 영역
2. 데이터 영역
3. 스택 영역
4. 힙 영역

#### PCB
* 프로세스 제어 블록
* 프로세스의 상태, 프로그램 카운터, 레지스터, CPU 스케줄링 정보, 메모리 관리 정보, 입출력 상태 정보를 저장하는 자료구조

#### 컨텍스트 스위칭
* CPU가 한 프로세스에서 다른 프로세스로 전환하는 작업

#### 멀티프로세싱
* 여러 개의 CPU를 사용하여 여러 개의 프로세스를 동시에 실행하는 방식

#### IPC
* 프로세스 간 통신
* 메시지 전달, 공유 메모리, 파이프, 소켓, 파일 등을 사용하여 프로세스 간 통신을 한다.

### 스레드
* 프로세스 내에서 실행되는 흐름의 단위
* 코드, 데이터, 힙은 스레드 간에 공유되고 스택은 스레드마다 독립적이다.

#### 멀티스레딩
* 여러 개의 스레드를 사용하여 여러 개의 작업을 동시에 처리하는 방식

#### 공유 자원
* 여러 개의 스레드가 공유하는 자원
* race condition이 발생할 수 있다.

#### 임계 영역
* 공유 자원을 사용하는 코드 영역



